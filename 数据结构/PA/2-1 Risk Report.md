# 2-1 Risk Report

## 算法构思

本题的核心是如何构造一个类似于“队列”的数据结构，数据遵循先进先出的原则，且又能在O(1)时间内找到最大值。针对本题，我发现从$i−m_i$到$i-1$并不是每一个数字都有意义，实际上，只需要存储这样一个子序列就可以：**该子序列B满足子列的每一项都严格大于所有原数组中项数大于这一项的元素**，而每当 i 加一，只需要根据$m_i$删掉B的前几项，并从子序列的最后开始向前找到大于A[i-1]的项并删掉其后面的所有元素，这样就可以得到新的满足要求的B。

在搜索满足最大确诊病例在[0,p),[p,q)问题上，我采取了维护前缀和的方法，即`les_num[i]`表示最大确诊病例数小于 i 的总天数

## 时间和空间复杂度的估算

**时间复杂度：**注意到维护B序列的两个指针lo和hi一定最多只会扫过一个一个元素一次，所以维护B序列的时间复杂度为$O(n)$，此外维护前缀和数组的时间复杂度为$O(m) \, m=2*10^{6}$，查询时间复杂度为$O(T)$。因此总复杂度为$O(m+n+T)$

**空间复杂度：**程序开了三个长为n的数组，分别存储每日病例数，B数组每一项对应的病例数和B数组元素在原数组的下标。此外还开了两个长为m的数组存储每日前$i-m_i$日最大病例数和前缀和。总空间复杂度为$O(n+m)$

